#!/usr/bin/env node
'use strict';

const meow = require('meow');
const updateNotifier = require('update-notifier');
const pkg = require('../package.json');
const bitcly = require('../');

updateNotifier({pkg}).notify();

var cli = meow([
  'Usage',
  '  $ bitcly <url>',
  '',
  'Example',
  '  $ bitcly http://github.com/sotojuan/bitcly',
  '  http://bit.ly/1m8bf9q',
]);

if (!cli.input[0]) {
  console.log('Please specify a URL');
  process.exit(1);
}

bitcly(cli.input[0])
  .then(console.log)
  .catch(error => {
    console.error(error.message);
  });
